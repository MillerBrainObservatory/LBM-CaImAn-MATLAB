selector_to_html = {"a[href=\"registration.html#inputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">2.2. </span>Inputs<a class=\"headerlink\" href=\"#inputs\" title=\"Permalink to this heading\">#</a></h2><p>In addition to the default function inputs described in section <a class=\"reference internal\" href=\"../first_steps/overview.html#parameters\"><span class=\"std std-ref\">Core Parameters</span></a>, registration has a few important additional parameters.</p><p><code class=\"code docutils literal notranslate\"><span class=\"pre\">start_plane</span></code>\n: The plane to start registration.</p>", "a[href=\"segmentation.html#segmentation-overview\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">3.1. </span>Segmentation Overview<a class=\"headerlink\" href=\"#segmentation-overview\" title=\"Permalink to this heading\">#</a></h2><p>Much of work is about separating \u201cgood activity\u201d, the flourescence changes that we can attribute to a single cell, vs \u201cnoise, which is everything else (including signal from other neurons).</p><p>To do this, we take advantage of the fact that a <em>slow calcium signal is typically similar between adjacent frames</em>.</p>", "a[href=\"assembly.html#inputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">1.2. </span>Inputs<a class=\"headerlink\" href=\"#inputs\" title=\"Permalink to this heading\">#</a></h2><p>This example follows a directory structure shown in <a class=\"reference internal\" href=\"../first_steps/setup.html#directory-structure\"><span class=\"std std-ref\">the first steps guide</span></a>.</p><p>Inputs and outputs can be anywhere you wish so long as you have read/write permissions.</p>", "a[href=\"tips_tricks.html#learn-about-functions\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">5.3. </span>Learn about Functions<a class=\"headerlink\" href=\"#learn-about-functions\" title=\"Permalink to this heading\">#</a></h2>", "a[href=\"collation.html#inputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">4.1. </span>Inputs<a class=\"headerlink\" href=\"#inputs\" title=\"Permalink to this heading\">#</a></h2><p>First, the [Y, X] offsets (in microns) are used for an initial, dirty axial alignment:</p>", "a[href=\"tips_tricks.html#parallel-processing\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">5.4. </span>Parallel Processing<a class=\"headerlink\" href=\"#parallel-processing\" title=\"Permalink to this heading\">#</a></h2><p>The MATLAB <a class=\"reference external\" href=\"https://www.mathworks.com/help/parallel-computing/parpool.html\">parpool documentation</a> and imply that parpool uses the <strong>number of physical cores</strong> (rather than logical) by default.\nHowever, there are instances where the parpool shuts down due to requesting \u201ctoo many logical cores\u201d, suggesting the contrary to the documentation.\nYou can avoid many parallel-processing related issues by <strong>reducing the number of workers to the actual number of physical cores</strong>:</p>", "a[href=\"segmentation.html\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">3. </span>Segmentation<a class=\"headerlink\" href=\"#segmentation\" title=\"Permalink to this heading\">#</a></h1><p>Function for this step: <a class=\"reference internal\" href=\"../api/core.html#segmentPlane\" title=\"segmentPlane\"><code class=\"xref mat mat-func docutils literal notranslate\"><span class=\"pre\">segmentPlane()</span></code></a></p>", "a[href=\"segmentation.html#segmentation-outputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">3.4. </span>Segmentation Outputs<a class=\"headerlink\" href=\"#segmentation-outputs\" title=\"Permalink to this heading\">#</a></h2><p>The <code class=\"code docutils literal notranslate\"><span class=\"pre\">.h5</span></code> output for segmentation contains several groups.\nYou will not find any movies, those are stored in the <a class=\"reference internal\" href=\"registration.html#reg-output\"><span class=\"std std-ref\">registration outputs</span></a>.</p>", "a[href=\"#user-guide\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\">User Guide<a class=\"headerlink\" href=\"#user-guide\" title=\"Permalink to this heading\">#</a></h1><p>This section covers each step in the pipeline, parameters and metadata in more detail.</p>", "a[href=\"tips_tricks.html#fullfile\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">5.2. </span>Fullfile<a class=\"headerlink\" href=\"#fullfile\" title=\"Permalink to this heading\">#</a></h2><p>Matlabs <a class=\"reference external\" href=\"https://www.mathworks.com/help/matlab/ref/fullfile.html\">fullfile</a> function makes it easy to search for a filename:</p>", "a[href=\"registration.html#overview\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">2.1. </span>Overview<a class=\"headerlink\" href=\"#overview\" title=\"Permalink to this heading\">#</a></h2><p>Disturbances or movement in our timeseries cause variations in pixel locations between frames called <strong>motion artifacts</strong>.</p><p>The motion artifacts present in our sample come in two flavors, <code class=\"docutils literal notranslate\"><span class=\"pre\">rigid</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">non-rigid</span></code>. See <a class=\"reference internal\" href=\"../tutorials/registration_tutorial.html#tut-types-of-reg\"><span class=\"std std-ref\">Types of Registration</span></a> for more information.</p>", "a[href=\"assembly.html#overview\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">1.1. </span>Overview<a class=\"headerlink\" href=\"#overview\" title=\"Permalink to this heading\">#</a></h2><p>Assembling reconstructed images from raw LBM datasets consists of 3 main processing steps:</p>", "a[href=\"registration.html#outputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">2.5. </span>Outputs<a class=\"headerlink\" href=\"#outputs\" title=\"Permalink to this heading\">#</a></h2><p>Just like <a class=\"reference internal\" href=\"assembly.html#extraction-inputs\"><span class=\"std std-ref\">assembly outputs</span></a>, registration outputs to <code class=\"code docutils literal notranslate\"><span class=\"pre\">.h5</span></code> format.</p><p>Registration outputs have the following groups:</p>", "a[href=\"troubleshooting.html#matlab-server-issues\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">6.3. </span>Matlab Server Issues<a class=\"headerlink\" href=\"#matlab-server-issues\" title=\"Permalink to this heading\">#</a></h2><p>These come in many flavors and are mostly <cite>windows</cite> issues due to their background serrvice.</p><p>Here is the general fix for all of them:</p>", "a[href=\"assembly.html#outputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">1.3. </span>Outputs<a class=\"headerlink\" href=\"#outputs\" title=\"Permalink to this heading\">#</a></h2><p>Output data are saved in <code class=\"docutils literal notranslate\"><span class=\"pre\">.h5</span></code> format, with the following characteristics:</p>", "a[href=\"collation.html#outputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">4.2. </span>Outputs<a class=\"headerlink\" href=\"#outputs\" title=\"Permalink to this heading\">#</a></h2><p>This output file mirrors the registration output but with all z-planes collated into a single dataset.</p>", "a[href=\"registration.html\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">2. </span>Registration<a class=\"headerlink\" href=\"#registration\" title=\"Permalink to this heading\">#</a></h1><p>We use <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Image_registration\">image registration</a> to make sure that our neuron in the first frame is in the same spatial location as in frame N throughout the time-series.</p>", "a[href=\"assembly.html\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">1. </span>Assembly<a class=\"headerlink\" href=\"#assembly\" title=\"Permalink to this heading\">#</a></h1><p>Function for this step: <a class=\"reference internal\" href=\"../api/core.html#convertScanImageTiffToVolume\" title=\"convertScanImageTiffToVolume\"><code class=\"xref mat mat-func docutils literal notranslate\"><span class=\"pre\">convertScanImageTiffToVolume()</span></code></a></p>", "a[href=\"collation.html\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">4. </span>Axial Collation and Correction<a class=\"headerlink\" href=\"#axial-collation-and-correction\" title=\"Permalink to this heading\">#</a></h1><p>Use pollen calibration data to spatially align each z-plane and merge across planes.</p><p>Core function(s): <a class=\"reference internal\" href=\"../api/core.html#collatePlanes\" title=\"collatePlanes\"><code class=\"xref mat mat-func docutils literal notranslate\"><span class=\"pre\">collatePlanes()</span></code></a></p>", "a[href=\"registration.html#non-rigid-registration\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">2.4. </span>Non-rigid Registration<a class=\"headerlink\" href=\"#non-rigid-registration\" title=\"Permalink to this heading\">#</a></h2><p>To perform non-rigid registration, you must specify the size of the patches you want to split the FOV into.</p><p>Typical patch sizes for <span class=\"math notranslate nohighlight\">\\(512x512\\)</span> movies are <span class=\"math notranslate nohighlight\">\\(32x32\\)</span>, which would lead to <span class=\"math notranslate nohighlight\">\\(512/32=16\\)</span> blocks that will be motion-corrected in parallel.</p>", "a[href=\"segmentation.html#inputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">3.2. </span>Inputs<a class=\"headerlink\" href=\"#inputs\" title=\"Permalink to this heading\">#</a></h2><p>Inputs are consistent with <a class=\"reference internal\" href=\"registration.html#registration\"><span class=\"std std-ref\">Registration</span></a>, substituting::</p>", "a[href=\"segmentation.html#tuning-cnmf\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">3.3. </span>Tuning CNMF<a class=\"headerlink\" href=\"#tuning-cnmf\" title=\"Permalink to this heading\">#</a></h2><p>To get an idea of the default parameters (what happens if you use <code class=\"code docutils literal notranslate\"><span class=\"pre\">CNMFSetParams()</span></code> with no arguments),\nyou can run the following code to see the defaults:</p>", "a[href=\"troubleshooting.html\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">6. </span>Troubleshooting<a class=\"headerlink\" href=\"#troubleshooting\" title=\"Permalink to this heading\">#</a></h1><h2><span class=\"section-number\">6.1. </span>Memory<a class=\"headerlink\" href=\"#memory\" title=\"Permalink to this heading\">#</a></h2>", "a[href=\"tips_tricks.html\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">5. </span>Tips and Tricks<a class=\"headerlink\" href=\"#tips-and-tricks\" title=\"Permalink to this heading\">#</a></h1><h2><span class=\"section-number\">5.1. </span>Exploring Datasets in MATLAB<a class=\"headerlink\" href=\"#exploring-datasets-in-matlab\" title=\"Permalink to this heading\">#</a></h2><p>There are several helper functions located in <code class=\"docutils literal notranslate\"><span class=\"pre\">core/utils</span></code>.</p>", "a[href=\"troubleshooting.html#memory\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">6.1. </span>Memory<a class=\"headerlink\" href=\"#memory\" title=\"Permalink to this heading\">#</a></h2>", "a[href=\"tips_tricks.html#find-matlab-install-location\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">5.5. </span>Find MATLAB Install Location<a class=\"headerlink\" href=\"#find-matlab-install-location\" title=\"Permalink to this heading\">#</a></h2><p>The location of the installation is often in <cite>~/Documents/MATLAB/</cite>.\nIf you put the root directory elsewhere, you will need to navigate to that directory within the matlab GUI.</p><p>Modern versions of MATLAB (2017+) solve most Linux/Windows filesystem conflicts.</p>", "a[href=\"registration.html#validate-outputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">2.6. </span>Validate Outputs<a class=\"headerlink\" href=\"#validate-outputs\" title=\"Permalink to this heading\">#</a></h2><p>Validation metric figures are placed in your <code class=\"docutils literal notranslate\"><span class=\"pre\">save_path</span></code> as <code class=\"docutils literal notranslate\"><span class=\"pre\">figures/registration_metrics_plane_N</span></code>.</p>", "a[href=\"troubleshooting.html#windows-filepaths\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">6.4. </span>Windows Filepaths<a class=\"headerlink\" href=\"#windows-filepaths\" title=\"Permalink to this heading\">#</a></h2><p>Sometimes Windows filepaths, with the backslash, is taken as an escape character rather than a file-path separator:</p>", "a[href=\"assembly.html#validate-outputs\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">1.4. </span>Validate Outputs<a class=\"headerlink\" href=\"#validate-outputs\" title=\"Permalink to this heading\">#</a></h2><p>In your <code class=\"docutils literal notranslate\"><span class=\"pre\">save_path</span></code>, you will see a newly created <code class=\"docutils literal notranslate\"><span class=\"pre\">figures</span></code> folder:</p>", "a[href=\"tips_tricks.html#exploring-datasets-in-matlab\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">5.1. </span>Exploring Datasets in MATLAB<a class=\"headerlink\" href=\"#exploring-datasets-in-matlab\" title=\"Permalink to this heading\">#</a></h2><p>There are several helper functions located in <code class=\"docutils literal notranslate\"><span class=\"pre\">core/utils</span></code>.</p>", "a[href=\"troubleshooting.html#missing-compiled-binary-windows\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">6.2. </span>Missing Compiled Binary (Windows)<a class=\"headerlink\" href=\"#missing-compiled-binary-windows\" title=\"Permalink to this heading\">#</a></h2><p><strong>Cause:</strong> Likely caused by missing compiled binary for <cite>graph_conn_comp_mex.mexw64 (win)</cite>/ <cite>graph_conn_comp_mex.mexa64 (unix)</cite></p><p><strong>Solution:</strong>\n1. Compile the binary in MATLAB via the command window:</p>", "a[href=\"registration.html#rigid-registration\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\"><span class=\"section-number\">2.3. </span>Rigid Registration<a class=\"headerlink\" href=\"#rigid-registration\" title=\"Permalink to this heading\">#</a></h2><p>Rigid registration is accomplished by giving NoRMCorre <strong>no variable for <code class=\"code docutils literal notranslate\"><span class=\"pre\">grid_size</span></code></strong>,\nso it defaults to the size of your image and thus only processing a single patch encompassing the entire field-of-view.</p>"}
skip_classes = ["headerlink", "sd-stretched-link"]

window.onload = function () {
    for (const [select, tip_html] of Object.entries(selector_to_html)) {
        const links = document.querySelectorAll(` ${select}`);
        for (const link of links) {
            if (skip_classes.some(c => link.classList.contains(c))) {
                continue;
            }

            tippy(link, {
                content: tip_html,
                allowHTML: true,
                arrow: true,
                placement: 'auto-start', maxWidth: 500, interactive: false,

            });
        };
    };
    console.log("tippy tips loaded!");
};
